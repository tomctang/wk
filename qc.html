
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1. Qunat research &#8212; Tom Workbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=8dedbda2" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'qc';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Notebook 2023-25" href="nb2024.html" />
    <link rel="prev" title="Introduction" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">Tom Workbook</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Notebook</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1. Qunat research</a></li>
<li class="toctree-l1"><a class="reference internal" href="nb2024.html">2. Notebook 2023-25</a></li>
<li class="toctree-l1"><a class="reference internal" href="nb2022.html">3. Notebook &lt;=2022</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/tomctang/wk" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/qc.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Qunat research</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#steps">1.1. 量化交易Steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.1.1. 1. 建立系统（自己的）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha">1.1.2. 2. 寻找交易策略Alpha</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backtesting">1.1.3. 3. 回测Backtesting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1.1.4. 4. 自动交易系统</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">1.1.4.1. 4.1 资金管理和风险控制</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">1.1.4.2. 4.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intro">1.2. Intro</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#work-flow">1.3. Work flow</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="qunat-research">
<h1><span class="section-number">1. </span>Qunat research<a class="headerlink" href="#qunat-research" title="Link to this heading">#</a></h1>
<section id="steps">
<h2><span class="section-number">1.1. </span>量化交易Steps<a class="headerlink" href="#steps" title="Link to this heading">#</a></h2>
<section id="id1">
<h3><span class="section-number">1.1.1. </span>1. 建立系统（自己的）<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>技术分析（如价格和趋势信号）; 基本面数据（如公司财务指标）; 新闻信息。</p></li>
<li><p>统计套利（Statistical Arbitrage）是量化交易的一种主要形式，涉及股票、期货和外汇交易，只需要高中水平的数学、统计学和计算机编程知识即可入门</p></li>
</ol>
</section>
<section id="alpha">
<h3><span class="section-number">1.1.2. </span>2. 寻找交易策略Alpha<a class="headerlink" href="#alpha" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>零售账户，比如在 Interactive Brokers 开户。确保券商有API可以自动下单, 先用模拟交易账户（Paper Trading）测试策略，确保稳定后再投入真金白银。</p></li>
</ol>
<ol class="arabic simple">
<li><p>交易策略的来源: 虽然学术研究可以提供有价值的策略，但许多学术策略可能过于复杂、已经失效（竞争导致利润减少）或需要昂贵的数据才能回测。因此，交易论坛和博客中更简单的策略可能同样有效。</p></li>
</ol>
<p>学术研究： 商学院教授的网站; 社会科学研究网络（SSRN）; 国家经济研究局（NBER）; 财经网站和博客; Yahoo! Finance, Seeking Alpha, <a class="reference external" href="http://TheStreet.com">TheStreet.com</a>, Abnormal Returns; Elite Trader, Wealth-Lab 等</p>
<p>新闻与杂志：《经济学人》Buttonwood专栏; 《纽约时报》Mark Hulbert专栏; 交易市场杂志（Stocks, Futures and Options magazine）</p>
<ol class="arabic simple" start="2">
<li><p>适合自己的交易策略
在你投入大量时间去回测（用历史数据验证）一个交易策略之前，先用一些简单的方法快速筛选，排除那些明显不可行的策略，以免浪费时间和金钱。</p></li>
</ol>
<p>(1) 是否比市场整体表现更好？（Benchmark 对比）想象你有 10 万元要投资，你的交易策略到底能不能比最简单的投资方式（比如买入指数基金）表现更好？</p>
<p>如果你的策略是多头策略（只做买入），那么它至少要跑赢大盘指数（比如美国的 S&amp;P 500）。如果你的策略长期表现还不如直接买指数基金，那干嘛费劲折腾呢？
如果你的策略是市场中性（market-neutral），比如对冲基金喜欢做的那种——买入一些股票，同时卖空另一些股票，那么你至少要比无风险收益高，比如美国国债的利息收益。如果你拿着 10 万块去交易，最后的年收益还不如把钱存银行吃利息，那这策略也没意义。</p>
<p>一句话：如果你的策略赚的钱还不如最简单的投资方式，那就没必要研究了。</p>
<p>(2) 夏普比率（Sharpe Ratio）—— 衡量稳定性</p>
<p>假设你和朋友都在炒股：
你每个月赚 5%，但有时候赚 10%，有时候亏 5%，波动很大。
朋友 A 每个月赚 3%，但每个月都稳定盈利，从不大赚大亏。
虽然你平均收益率更高，但朋友的交易方式更稳定，不会让人天天提心吊胆。从风险控制的角度看，朋友的策略更可靠。</p>
<p>这就是**夏普比率（Sharpe Ratio）**衡量的东西——它告诉你：</p>
<p>策略的收益到底是不是“稳稳地赚”，还是“大起大落”？
策略的收益和风险相比，是否划算？
💡 计算方法（大致理解）：</p>
<p>Sharpe Ratio = 策略的年收益 - 无风险收益
收益的波动程度（标准差）</p>
<p>夏普比率 &lt; 1 ：风险太大，波动太猛，不能单独用。
夏普比率 &gt; 2 ：策略比较稳健，基本能每个月赚钱。
夏普比率 &gt; 3 ：策略非常稳定，可能是日内高频交易策略，每天都能赚钱。
一句话总结：不要光看“赚了多少”，还要看“赚得稳不稳”。</p>
<p>(3) 策略的最大回撤（Max Drawdown）—— 你能扛得住多大的亏损？你用 10 万块投资，起初赚得很开心，但后来遇到一波大跌，账户从 10 万跌到了 7 万，你会怎么办？</p>
<p>你如果心理承受能力强，能坚持不动等它涨回来，OK，问题不大。
但如果你看到亏 30% 就忍不住割肉，那你很可能会亏得更惨。
💡 最大回撤（Max Drawdown） 就是：</p>
<p>最大亏损幅度：比如你账户从最高点 10 万跌到 7 万，就是 30% 回撤。
最长亏损持续时间：比如这次亏损花了 6 个月才恢复，你能熬得住吗？
一句话总结：
亏损是不可避免的，但你需要确保自己能承受住最大亏损，否则策略不适合你。</p>
<p>(4) 交易成本——你的策略能扛住手续费吗？很多交易策略在纸面上看着很赚钱，但一到实盘就亏损。包括：</p>
<p>手续费（佣金）：每次买卖都会有固定费用。
滑点（slippage）：市场价格可能和你下单的价格不同，比如你想 100 元买入，但市场波动，实际成交价变成了 100.2 元，这就是滑点。
市场冲击（market impact）：如果你一次性买入很多，可能把价格推高，导致你买不到便宜价格。</p>
<p>💡 举例：一个基于**布林带（Bollinger Bands）**的策略，在理论测试中表现很好，夏普比率高达 3（非常稳健）。
但一旦加入交易成本，夏普比率立刻掉到 -3（严重亏损）。</p>
<p>(5) 幸存者偏差（Survivorship Bias）—— 数据有没有骗你？
假设你在研究过去 10 年里涨幅最好的 100 只股票，发现它们的平均年回报率高达 30%，你兴奋地想用这些数据回测自己的策略。但你忽略了：</p>
<p>这 100 只股票都是“活下来的赢家”，很多早就倒闭的公司被自动忽略了。
如果你当年用这个策略投资，可能会买到那些倒闭的公司，而这些公司早就不在数据里了。
结果：你的策略在历史数据里赚钱，但在现实中会亏损。
💡 尤其要小心：</p>
<p>低估值选股（Value Investing）策略，因为许多“便宜”的股票后来都倒闭了，历史数据不一定可靠。
一句话总结：
不要被历史数据欺骗，确保你用的数据包含所有曾经存在的公司，而不是只看活下来的赢家。</p>
<p>(6) 策略是否仍然有效？
怎么理解？
很多策略在 10 年前很好用，但现在已经过时了，因为：</p>
<p>市场竞争加剧，更多人用相同策略，导致利润消失。
市场环境变化，例如法规调整、算法交易普及等。
💡 例子：</p>
<p>以前有些策略可以利用卖空限制赚钱，但后来卖空规则放宽，这些策略就失效了。
一句话总结：
策略不能只看过去赚钱，还要确认它最近几年是否依然有效。</p>
<p>(7) 数据挖掘偏差（Data-Snooping Bias）—— 你是在“骗自己”吗？
怎么理解？
有些策略参数特别多，比如：</p>
<p>进场信号有 10 个条件，出场信号有 10 个参数……
你在历史数据里不断优化参数，直到回测结果“完美”。
问题来了：</p>
<p>你不是找到真正赚钱的模式，而是“过拟合”了过去的数据。
未来市场变化，这些优化的参数根本不适用。
💡 如何避免？</p>
<p>用简单的策略，避免过度优化。
滚动回测（Moving Window Backtesting），看看策略是否在不同时间段都能稳定盈利。
依赖经济逻辑，而不仅仅是数学优化。
一句话总结：太复杂的策略容易骗自己，简单才是王道。</p>
<p>##############################################################################################################</p>
<p>这一章介绍了一些高级量化交易方法，包括：</p>
<p>均值回归 vs. 动量交易（什么时候价格会回归？什么时候趋势会继续？）
市场状态切换（怎么判断市场是震荡还是趋势？）
因子模型（股票涨跌的核心因素是什么？）
交易退出策略（什么时候卖出？如何止盈止损？）
季节性交易（市场真的有“春节效应”或者“圣诞行情”吗？）
这些方法是量化交易的核心逻辑，学会后可以帮助你更精准地预测市场，提高交易胜率。</p>
<ol class="arabic simple">
<li><p>均值回归 vs. 动量交易
市场上的交易策略一般分为两大类：</p></li>
</ol>
<p>均值回归策略 → 价格短期内涨太多了，就会跌回正常值；跌太多了，就会涨回来。
动量交易策略 → 价格涨了就继续涨，跌了就继续跌，类似牛市和熊市的走势。
✅ 均值回归交易：价格会回到平均水平
例子 1：橡皮筋效应</p>
<p>如果你用手拉橡皮筋，拉得越远，松手后它回弹得越快。
市场也是一样：如果股票价格偏离“合理价格”太远，最终会回归正常水平。
例子 2：股票的布林带（Bollinger Bands）</p>
<p>你看到某只股票过去 100 天的平均价格是 <span class="math notranslate nohighlight">\(100，但今天跌到了 \)</span>90，你认为它太便宜了，未来可能涨回去，于是买入。
当它涨回 $100 以上时，你卖出获利。
📌 适合市场：</p>
<p>震荡市（价格在一个区间内上下波动）。
波动性大但长期稳定的市场（比如大盘股，ETF）。
📌 风险：</p>
<p>如果市场趋势发生变化，比如股票的“合理价格”下降了，你可能会误以为它会反弹，结果继续下跌。
✅ 动量交易：跟随趋势
例子 1：运动员冲刺–在冲刺的时候速度会越来越快，直到精疲力尽才慢下来。股票价格也类似：如果一只股票一直涨，说明市场愿意不断买入，趋势可能会持续。
例子 2：股票突破新高–你发现某只股票 过去 6 个月一直涨，你决定买入，因为它可能继续上涨。直到趋势反转（比如股价开始跌破 50 日均线），你才卖出。</p>
<p>📌 适合市场：</p>
<p>趋势明显的市场（牛市或熊市）。
小盘股、成长股、加密货币（这些资产容易出现大趋势）。
📌 风险：</p>
<p>如果市场趋势突然反转，比如政策变动、财报暴雷，你的交易可能会被“套牢”。
竞争者太多，如果市场上很多人都在做动量交易，趋势可能很快结束。
2. 市场状态切换（Regime Switching）
市场有时是震荡市（适合均值回归），有时是趋势市（适合动量交易）。
聪明的交易者会判断市场状态，然后选择合适的策略。</p>
<p>✅ 如何判断市场是震荡还是趋势？
观察市场波动</p>
<p>低波动（市场上下波动小）→ 市场稳定，适合均值回归策略。
高波动（市场突然波动变大）→ 可能是趋势市，适合动量交易。
使用技术指标</p>
<p>ADX（平均方向性指数）
ADX &gt; 25 → 市场有趋势，可以做动量交易。
ADX &lt; 20 → 市场震荡，适合均值回归。
机器学习预测市场变化</p>
<p>量化交易者可以使用机器学习模型来识别市场趋势变化，比如：
隐马尔可夫模型（HMM）：用来检测市场状态是“震荡”还是“趋势”。
神经网络：分析大量历史数据，预测市场状态变化。
📌 风险：</p>
<p>市场状态很难预测，如果误判市场状态，可能会导致策略失效。
3. 因子模型（Factor Models）
因子模型是用来解释股票价格波动的数学方法，帮助交易者找到影响市场的核心因素。</p>
<p>✅ Fama-French 三因子模型
这是一种经典的因子投资方法，认为股票的回报主要由以下三点决定：</p>
<p>市场风险因子（Beta）：股票是否容易跟随市场涨跌。
公司规模因子（Size）：小盘股 vs. 大盘股（小盘股通常表现更好）。
价值因子（Value）：价值股 vs. 成长股（低市净率股票通常更稳定）。
📌 应用：</p>
<p>如果最近小盘股表现好 → 多投资小盘股。
如果价值股跑赢成长股 → 多投资价值股。
📌 风险：</p>
<p>因子收益可能会变化，比如 90 年代互联网泡沫时，成长股大幅跑赢价值股。
4. 交易退出策略
✅ 什么时候卖出？
固定持仓时间（例如，动量策略通常持有 1-5 天）。
目标价格/止盈（例如，盈利 10% 就卖出）。
止损策略（例如，亏损 5% 就卖出）。
重新计算交易信号（如果交易策略的信号变了，就退出）。
📌 动量 vs. 均值回归的退出方式</p>
<p>动量交易：趋势反转时退出，或者达到止盈目标时退出。
均值回归交易：当价格回到均值附近，或者持有时间过长都可以退出。
📌 风险：</p>
<p>太早止盈会错过更大收益。
止损太紧会导致经常被市场震出。
5. 季节性交易（Seasonal Trading）
有些市场在特定时间表现更强或更弱，这叫季节性效应。</p>
<p>✅ 股票市场的季节性
“一月效应” → 小盘股在 1 月通常表现较好。
“五月卖出”（Sell in May and go away） → 5-10 月股票市场通常表现较差。
“圣诞行情” → 11-12 月市场通常上涨。
📌 期货市场的季节性</p>
<p>原油 &amp; 汽油交易：夏季价格通常上涨（旅游需求增加）。
农产品期货：收割季（9-11 月）供给增加，价格下降。
📌 风险：</p>
<p>季节性效应可能失效，越来越多交易者知道这个规律，套利空间减少。
6. 结论
本章介绍了一些高级量化交易概念：</p>
<p>均值回归 vs. 动量交易 → 适合不同市场环境。
市场状态切换 → 识别何时转换策略。
因子模型 → 通过数学方法分析股票收益的驱动因素。
交易退出策略 → 何时卖出比何时买入更重要！
季节性交易 → 股票和期货市场都存在季节性规律。
💡 交易的关键不是找到“完美策略”，而是灵活适应市场变化，持续优化策略！🚀</p>
</section>
<section id="backtesting">
<h3><span class="section-number">1.1.3. </span>3. 回测Backtesting<a class="headerlink" href="#backtesting" title="Link to this heading">#</a></h3>
<p>(1) Backtrader
开源免费，适用于个人和小型团队。
支持多市场（股票、期货、外汇、加密货币）。
可以直接接入实盘交易（IB、Binance、Alpaca等）。
内置可视化分析（回测结果、资金曲线、交易信号）。
(1.1) FastQuant
✅ 优点：
基于 Backtrader，但封装得更简单，适合新手。
只需几行 Python 代码 就能运行回测。
适用于股票、外汇等市场，支持多种技术指标（MACD、均线等）。
❌ 缺点：
功能不如 Backtrader 强大，灵活性较低。
不支持实时交易。
📌 **适合：**想要快速上手回测但不想写太多代码的 Python 用户。</p>
<p>(2) Zipline
✅ 优点：
由 Quantopian 团队开发，曾用于顶级量化竞赛。
免费开源，支持 Python。
内置数据处理、财报数据整合（Quandl API）。
历史模拟与实盘交易集成（Alpaca API）。
❌ 缺点：
开发已停止维护（社区仍有部分支持）。
不支持高频交易，只适合日线级别回测。
依赖 Pandas 计算，回测速度较慢。
📌 适合：想研究因子选股、日线级别交易的个人交易者。</p>
<p>(3) QuantConnect
✅ 优点：
免费提供云端回测，支持C#、Python、F# 语言。
可回测股票、期货、外汇、加密货币等。
提供超大规模历史数据（比 Zipline/Backtrader 更完善）。
可连接 IB、Binance 进行实盘交易。
❌ 缺点：
本地回测体验不佳，主要依赖云端计算。
高级功能需要付费，例如更长时间的数据访问权限。
📌 **适合：**希望使用云计算资源，并且喜欢 Python 或 C# 进行量化交易的用户。</p>
<p>（1）免费数据源– ❌ 缺点：通常数据质量一般，可能有幸存者偏差、数据缺失等问题。</p>
<p>数据来源	适用市场	数据类型	优点	缺点
Yahoo Finance	股票、ETF	日线数据	免费，简单易用	不能下载高频数据，可能有幸存者偏差
Alpha Vantage	股票、外汇、加密	日线、分钟级数据	免费 API 提供多种数据	免费额度有限，速度较慢
Binance API	加密货币	分钟级数据	免费提供全市场数据	只能用于加密货币交易
Quandl（部分免费）	股票、经济数据	日线数据	提供部分免费的宏观经济数据	高级数据需要付费
Oanda	外汇	分钟级数据	免费的外汇数据	只能用于外汇市场</p>
<p>（2）付费数据源– ✅ 优点：数据完整、质量高、包含详细的市场信息（如订单簿、L2 数据）。</p>
<p>数据来源	适用市场	数据类型	价格	优点	缺点
Bloomberg Terminal	全市场	高频、L2 数据	<span class="math notranslate nohighlight">\(25,000+/年	全市场数据，质量高	太贵了，个人投资者用不起
Reuters Eikon	股票、期货、外汇	高频、新闻数据	\)</span>20,000+/年	专业机构使用	价格昂贵
TickData	股票、期货	Tick 级数据	按年收费，<span class="math notranslate nohighlight">\(1000+	高频数据质量高	价格较贵
Polygon.io	股票、加密、外汇	Tick 级	月费 \)</span>49+	数据完整，支持 L2 订单流	需要付费
Intrinio	股票	财报 + 价格数据	订阅制，$99+	提供财务因子数据	价格偏贵</p>
<p>4.不同数据源的常见问题
1.拆股 &amp; 分红调整 → 否则股价会“假暴跌”。
2.幸存者偏差 → 退市的股票可能会影响策略真实表现。
3.高低点是否可靠 → 避免因假突破/假回撤导致错误交易</p>
<p>5.怎么评估回测结果
夏普比率（Sharpe Ratio） 和 最大回撤（Maximum Drawdown, MDD） 是两个最常用的指标。它们的作用分别是：
夏普比率：衡量赚钱的稳定性，告诉你单位风险能赚多少钱。
最大回撤：衡量亏损的最大风险，告诉你历史上最惨的时候亏了多少。</p>
<p>###详细解释
1.夏普比率
风险的度量——标准差
在投资中，风险通常用收益率的波动性来表示，波动性越大，风险也就越高。标准差是衡量这种波动性的一种常用统计指标。比如，如果一个投资组合的年化收益率波动为10%，这10%就代表了你在一年内可能遇到的正负波动幅度。
超额收益
超额收益指的是投资收益减去无风险收益（比如国债收益率）的部分。它反映了你因承担风险而获得的额外收益。
单位风险能赚多少钱
将超额收益除以风险（标准差），就得到了每承担一单位风险所获得的超额收益。换句话说，如果一个投资组合的夏普比率为1.5，就意味着每承担1单位的风险（标准差），你可以获得1.5单位的超额收益。这个比例越高，说明在每单位风险上获得的回报越多，投资表现越优秀，赚钱的稳定性也越高。</p>
<p>举个简单的例子
假设有两个投资组合：</p>
<p>组合A：超额收益为6%，标准差为5%，则夏普比率为
6%/5%=1.2。
组合B：超额收益为8%，标准差为8%，则夏普比率为
8%/8%=1.0
虽然组合B的超额收益更高，但它的风险也更大。夏普比率告诉我们组合A每承担1单位风险能赚1.2单位的超额收益，而组合B每承担1单位风险仅赚1.0单位的超额收益。因此，从风险调整后的角度看，组合A的表现更好。</p>
<p>2.最大回撤
最大回撤（Maximum Drawdown, MDD）可以用最简单的话来理解：它表示在一段时间内，你的投资或账户价值从最高点到最低点的最大下降幅度，也就是“最糟糕情况下损失了多少钱”。</p>
<p>回测中常见的问题</p>
<ol class="arabic simple">
<li><p>前视偏差（Look-Ahead Bias）——“未来数据作弊”
❌ 错误示例：</p></li>
</ol>
<p>你的策略用当天最低价来决定买入，但问题是你在当天交易时根本不知道最低价。
这相当于用未来数据作弊，让回测收益看起来比实际更好。
✅ 解决方案：</p>
<p>只使用当时可见的数据，比如前一天的收盘价，而不是当天的最低价。
2. 幸存者偏差（Survivorship Bias）——“只看赢家，忽略破产公司”
❌ 错误示例：</p>
<p>你在回测 2010-2020 年的股票表现，但只选了2024 年还存在的公司，忽略了已破产或退市的公司。
这让回测看起来很赚钱，但实际上过去的市场里有很多亏损股被筛掉了。
✅ 解决方案：</p>
<p>选择包含退市公司的数据库，比如 CRSP 或 Bloomberg。
自己每天存数据，记录所有股票，包括后来破产的。
3. 数据挖掘偏差（Data-Snooping Bias）——“瞎调参数，优化到历史最优”
❌ 错误示例：</p>
<p>你测试了1000 种均线组合，最终发现9 日均线 + 30 日均线最赚钱。
但这可能只是历史上的巧合，在未来可能根本没用。
✅ 解决方案：</p>
<p>分训练集和测试集，先在 2010-2015 年优化参数，再用 2016-2020 年测试，看看是否依然有效。
选择有逻辑支持的参数，而不是纯粹靠调参优化。
4. 忽略交易成本（Trading Costs）——“只看理论收益，不考虑交易成本”
❌ 错误示例：</p>
<p>你的策略每天交易 100 次，回测显示年化收益 500%。
但你没有考虑交易手续费、滑点和市场冲击，实际执行后，交易成本可能比利润还高。
✅ 解决方案：</p>
<p>在回测中加入真实交易成本, 测试策略是否仍然能盈利：
python
commission = 0.0005  # 交易费用 0.05%
slippage = 0.0002  # 滑点 0.02%
transaction_cost = commission + slippage</p>
<p>7.列举交易模式</p>
<p>策略	适用市场	适用周期	核心逻辑
均值回归策略	股票、外汇、期货	日线/周线	价格偏离均值后回归
配对交易	股票、ETF	日线/周线	相关资产价格偏离均值后回归
短期反转	股票	日内/1-5天	超跌反弹
动量交易	股票、期货	1个月-6个月	强者恒强，涨的更涨
日内突破	美股、A股	1分钟-1小时	突破关键价格后顺势交易
均线交叉	股票、外汇	日线/周线	金叉买入，死叉卖出
波动率突破	期货、外汇	日线/小时线	波动率放大后进入趋势</p>
</section>
<section id="id2">
<h3><span class="section-number">1.1.4. </span>4. 自动交易系统<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<section id="id3">
<h4><span class="section-number">1.1.4.1. </span>4.1 资金管理和风险控制<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<p>合理分配资金，控制交易风险，确保你的交易账户不会爆仓。无论你的交易策略多么优秀，都无法避免亏损（Drawdown），所以关键在于如何控制亏损，同时让账户稳定增长。本章主要介绍 Kelly 公式，并探讨 风险管理的原则和心理挑战。</p>
<ol class="arabic simple">
<li><p>为什么资金管理很重要？
每个交易策略都会遇到亏损期，可能是几分钟，也可能是几年。
如果杠杆过高或者资金分配不合理，一次大的亏损就可能让账户归零。
所以，资金管理的目标是：</p></li>
</ol>
<p>限制亏损在可承受范围内（防止爆仓）。
合理利用杠杆（既能放大盈利，也不让风险失控）。
优化资金分配，提高长期收益（合理分配资金到多个策略）。
💡 简单来说，资金管理的核心目标是“稳中求胜”，避免因短期亏损而被迫退出市场。</p>
<ol class="arabic simple" start="2">
<li><p>Kelly 公式：如何计算最优资金分配？
Kelly 公式 是金融界广泛使用的资金管理数学方法，它能帮助交易者计算最优杠杆和资金分配，以获得长期最大化复利增长。</p></li>
</ol>
<p>✅ Kelly 公式的计算方法
如果一个策略的平均收益是 𝑚，标准差是 s，那么最优杠杆 𝑓
f 计算公式是：</p>
<p>𝑓=𝑚/𝑠2</p>
<p>其中：</p>
<p>f：建议投入该策略的资金比例（最优杠杆）。
m：策略的平均收益率（期望收益）。
s：策略的标准差（波动性）。
📌 举个例子
假设你交易 S&amp;P 500 ETF（SPY）：</p>
<p>平均年收益：11.23%
年化波动率（标准差）：16.91%
风险利率：4%
Kelly 计算出的最优杠杆：
𝑓=（11.23%−4%）/16.91*16.91=2.528</p>
<p>这意味着，你应该用 2.528 倍杠杆来投资 SPY，以获得最大复利增长。</p>
<ol class="arabic simple" start="3">
<li><p>资金分配策略
如果你同时交易多个策略，如何合理分配资金？
Kelly 公式可以帮助你找到最优资金分配方式，确保风险最小，收益最大。</p></li>
</ol>
<p>✅ 计算最优资金分配
假设你有 3 个交易策略：</p>
<p>策略	平均年收益	标准差	计算出的最优杠杆
策略 A（石油 ETF）	13.96%	10.49%	1.33
策略 B（银行 ETF）	2.94%	6.1%	0.79
策略 C（零售 ETF）	-0.73%	6.48%	-1.49（应该做空）
Kelly 公式计算出的杠杆：</p>
<p>说明应该分配较多资金给 策略 A，适当投资 策略 B，并做空策略 C（因为它的收益是负的）。
这个方法确保你的整体收益率最大化，同时风险可控。
4. 交易风险管理
资金管理的另一个重要部分是控制交易风险，避免亏损失控。</p>
<p>✅ 如何控制交易风险？
限制最大回撤（Max Drawdown）</p>
<p>计算历史最大亏损，并设定最大可承受回撤（比如不超过 20%）。
例如，如果 S&amp;P 500 最大单日跌幅是 20.47%，你就不应该用超过 1 倍杠杆，否则可能承受超出预期的损失。
使用“半-Kelly”策略</p>
<p>Kelly 公式通常计算出的杠杆太激进，所以很多专业交易者使用**“半-Kelly”策略**（把计算出的杠杆减半）。
例如：
Kelly 计算的杠杆 = 2.528
实际使用杠杆 = 1.264
这样可以在风险和收益之间找到更稳健的平衡。
动态调整仓位</p>
<p>如果账户亏损了 10%，Kelly 公式会建议你减少仓位，以免损失进一步扩大。
例如：
你有 <span class="math notranslate nohighlight">\(100,000 资金，按照 Kelly 公式应该投资 \)</span>252,800。
如果亏损 10%，账户资金变为 <span class="math notranslate nohighlight">\(90,000，应该调整仓位为 \)</span>90,000 × 2.528 = $227,520。
5. 风险管理中的心理挑战
除了数学计算，交易中还涉及心理因素，例如：</p>
<p>贪婪（Greed）</p>
<p>当交易表现很好时，人们会想加大杠杆，希望快速赚更多钱。
**错误示例：**Amaranth Advisors 2006 年因单一交易策略（天然气套利）过度加杠杆，最终损失 60 亿美元。
恐惧（Despair）</p>
<p>当交易出现亏损时，交易者可能会因恐惧而过早退出，或者反向加大赌注，希望翻本。
**错误示例：**Long-Term Capital Management (LTCM) 1998 年因俄罗斯债务危机加大杠杆，最终破产。
亏损厌恶（Loss Aversion）</p>
<p>交易者往往过早止盈，但却死扛亏损单。
正确做法：
设定固定止损（比如亏损 5% 就平仓）。
设定浮动止盈（根据市场趋势动态调整目标收益）。
6. 资金管理 vs. 交易止损
有人认为设定止损可以避免爆仓，但实际上并非总是有效：</p>
<p>如果市场突然暴跌，止损单可能无法按预期价格成交，最终亏损更大（如 2008 年金融危机）。
止损适用于趋势策略，但不适用于均值回归策略：
趋势策略（股票突破新高买入）：止损有效，因为价格可能继续下跌。
均值回归策略（套利策略）：止损可能让你在价格即将反弹时卖出，导致亏损。
💡 所以，交易止损应该结合市场环境来使用，而不是一刀切！</p>
<ol class="arabic simple" start="7">
<li><p>结论
资金管理和风险控制是交易中最关键的部分，比策略本身更重要。
即使你的策略再优秀，如果杠杆过高，风险失控，也可能导致账户归零。</p></li>
</ol>
<p>✅ 关键原则
使用 Kelly 公式 计算最优杠杆，但建议使用半-Kelly，降低风险。
动态调整仓位，亏损时减少杠杆，盈利时合理增加。
分散投资，避免所有资金投入同一个策略。
关注心理因素，克服贪婪和恐惧，严格执行资金管理计划。
💡 交易的核心不是短期暴利，而是长期稳定增长。资金管理好的人，才能活得更久，赚得更多！ 🚀</p>
</section>
<section id="id4">
<h4><span class="section-number">1.1.4.2. </span>4.2<a class="headerlink" href="#id4" title="Link to this heading">#</a></h4>
<p>自动交易系统（Automated Trading System, ATS）是一套可以自动执行交易策略的计算机程序，它能够：</p>
<p>自动获取市场数据（价格、成交量、订单簿等）。
自动运行交易算法（计算买卖信号）。
自动管理订单（下单、撤单、修改订单）。
实时监控风险（止损、止盈、仓位管理）。
自动记录交易日志（方便复盘和改进策略）。
💡 简单来说，ATS 就是让交易过程完全自动化，不需要人工干预。</p>
<p>📌 搭建自动交易系统的完整流程
搭建 ATS 主要包含 六个核心步骤，每一步都对应着一个系统组件。</p>
<p>🔹 第 1 步：选择交易市场 &amp; 券商
首先，你要决定交易什么市场，以及使用哪个券商。不同市场的交易规则、数据获取方式、执行速度等都有差异。</p>
<p>✅ 交易市场
市场	适用交易	主要特点
股票（美股、A股）	价差交易、趋势跟踪	交易时间固定，波动较大
期货（商品、股指）	套利、趋势交易	有杠杆，保证金交易
外汇（Forex）	高频、趋势交易	24 小时交易，低成本
加密货币（Crypto）	高频、套利	24 小时交易，波动大
✅ 选择券商
券商必须提供 API（程序化交易接口），常见的量化交易券商：</p>
<p>美股：Interactive Brokers（IB）、TD Ameritrade、TradeStation
期货 &amp; 外汇：Oanda、NinjaTrader、TradeStation
加密货币：Binance、FTX、Kraken</p>
<p>🔹 第 2 步：获取市场数据
自动交易的第一步是实时获取市场数据，用于分析行情和生成交易信号。</p>
<p>✅ 数据类型
数据类型	作用	来源
历史数据	回测策略，分析长期趋势	Yahoo Finance, Quandl, Binance
实时行情（L1 数据）	计算技术指标，生成买卖信号	IB API, Binance API
订单簿数据（L2 数据）	高频交易策略使用	深度流动性池（Dark Pool）
财务数据	基本面选股	Quandl, Alpha Vantage
✅ 获取数据的方式
API 请求（券商 API）→ 适用于实时数据
数据库查询（MySQL, PostgreSQL）→ 存储历史数据
爬取网页数据（Python Scrapy, Selenium）→ 获取财报 &amp; 新闻数据
📌 示例：用 Python 获取美股数据（Yahoo Finance API）</p>
<p>python</p>
<p>import yfinance as yf
data = yf.download(“AAPL”, start=”2022-01-01”, end=”2023-01-01”)
print(data.head())</p>
<p>🔹 第 3 步：运行交易策略
一旦获取了市场数据，系统需要运行交易算法，生成买卖信号。</p>
<p>✅ 交易策略的核心组成
1.信号生成（Signal Generation）：
例如均线交叉（10 日均线上穿 50 日均线买入）。
2.仓位管理（Position Sizing）：
计算买入多少股（如最多 10% 账户资金）。
3.风险控制（Risk Management）：
4.设置止损（-5% 卖出），防止亏损过大。
📌 示例：用 Python 计算均线交叉信号</p>
<p>python</p>
<p>import pandas as pd
data[“SMA10”] = data[“Close”].rolling(window=10).mean()
data[“SMA50”] = data[“Close”].rolling(window=50).mean()
data[“Signal”] = (data[“SMA10”] &gt; data[“SMA50”]).astype(int)
print(data.tail())
🔹 第 4 步：订单管理（Order Management）
当策略决定买卖后，系统需要发送交易订单。</p>
<p>✅ 订单类型
订单类型	说明	适用情况
市价单（Market Order）	立即成交	适合高流动性资产
限价单（Limit Order）	只在特定价格成交	适合低流动性市场
止损单（Stop Loss）	亏损超过一定数值后自动卖出	风险控制
📌 示例：用 Python 通过 IB API 发送订单</p>
<p>python</p>
<p>from ib_insync import *
ib = IB()
ib.connect(‘127.0.0.1’, 7497, clientId=1)
contract = Stock(‘AAPL’, ‘SMART’, ‘USD’)
order = MarketOrder(‘BUY’, 10)
ib.placeOrder(contract, order)
🔹 第 5 步：实时监控 &amp; 风险管理
交易过程中，系统需要持续监控市场，防止异常情况（滑点、订单失败）。</p>
<p>✅ 监控哪些风险？
监控项	可能风险	解决方案
网络问题	交易失败	备用服务器
极端市场情况	突破止损	预设“熔断”机制
账户资金不足	无法下单	资金管理系统
📌 示例：设置止损</p>
<p>python</p>
<p>if data[“Close”][-1] &lt; stop_loss_price:
order = MarketOrder(‘SELL’, 10)
ib.placeOrder(contract, order)
🔹 第 6 步：日志 &amp; 交易记录
每笔交易必须记录下来，方便复盘和优化策略。</p>
<p>✅ 交易日志应该包括
交易时间
买卖信号
成交价格
盈利 &amp; 亏损
📌 示例：记录交易日志</p>
<p>python</p>
<p>import logging
logging.basicConfig(filename=’trading_log.txt’, <a class="reference external" href="http://level=logging.INFO">level=logging.INFO</a>)
<a class="reference external" href="http://logging.info">logging.info</a>(f”买入 AAPL，价格：{buy_price}，时间：{time_now}”)
📌 自动交易系统的完整架构
完整的 ATS 由 5 个核心模块组成：</p>
<p>市场数据模块（Market Data） → 获取行情数据
交易策略模块（Trading Algorithm） → 计算买卖信号
订单执行模块（Order Execution） → 发送交易订单
风险管理模块（Risk Management） → 控制亏损、监控市场
日志 &amp; 监控模块（Logging &amp; Monitoring） → 记录交易 &amp; 复盘
💡 如果你能搭建这 5 个模块，你的自动交易系统就基本完成了！</p>
<p>📌 结论
自动交易系统（ATS） 让交易策略自动化，提高交易效率，减少人为错误。
搭建 ATS 需要 API 接口、策略代码、订单管理、风险控制。
先用模拟账户（Paper Trading） 测试，确保系统稳定再实盘。
💡 一句话总结：如果你想让交易真正自动化，搭建一个完善的 ATS 是必不可少的！</p>
</section>
</section>
</section>
<section id="intro">
<h2><span class="section-number">1.2. </span>Intro<a class="headerlink" href="#intro" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>独立交易者能否在市场上长期生存并盈利？ 1)机构体量和反身性; 2)对冲基金之间的策略太相似 – 许多大型量化基金使用类似的交易策略，比如统计套利、市场中性策略等。</p>
<ul class="simple">
<li><p>个人交易者如何成长？ ✅ 方法 1：增加交易策略, 不断研究新策略，避免资金增长后策略失效。例如：如果你做日内交易（高频策略），可以尝试长线交易（持仓 1-3 个月）。or进入新的市场，比如期货或加密货币。</p></li>
</ul>
</li>
<li><p>炒股的三大原理</p>
<ul class="simple">
<li><p>人的精力是有限的</p></li>
<li><p>所有的投资理论都有正确的时候</p></li>
<li><p>投资标的的走势由市场的几何结构和能量决定: 市场的几何结构包括图形，成交，比价，市场偏好等，是可以观察和量化的，但同样的几何结构却可以有不同的演变，因为市场能量是参与者当下的合力，是不可预测的，但可预期，操作者唯一需要做的就是根据现实去预期和修正。</p></li>
</ul>
</li>
<li><p>怎么识别一本量化交易的书是不是好书。</p>
<ul class="simple">
<li><p>看作者, 比如《Systematic Trading》的作者Robert，他是一个退休的对冲基金经理，所以他的书观点更加专业，而且经过实践的检验。</p></li>
<li><p>《Algorithmic Trading》的作者 Chan，他做过机构投资，但是转为自营，他的书更加偏重个人或者散户投资人，但是相比起来，系统性就会差一些。</p></li>
<li><p>《Python for Algorithmic Trading》的作者 Yves，他是学院出身，主要工作是研究和写作，他的书籍显然更加适合初学者，而且写的比较具体和细致，适合没基础的人跟着操作，但是从深度和框架角度会较差一些。</p></li>
</ul>
</li>
<li><p>International Quant Championship (IQC) by WorldQuant is one of the largest and most structured quant competitions globally</p>
<ul class="simple">
<li><p>For early-career quant, IQC is the most accessible and respected global quant tournament with university rankings. But if you’re looking to build and monetize strategies, QuantConnect and Numerai are where real-world impact starts.</p></li>
</ul>
</li>
</ol>
<p><strong>log or QA</strong></p>
<ol class="arabic simple">
<li><p>这几个是高频用的吗？</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/man-group/ArcticDB">ArcticDB: high performance, serverless DataFrame database for Python Data ecosystem</a></p></li>
<li><p><a class="reference external" href="https://github.com/OpenTSDB/opentsdb">opentsdb: free scalable, distributed Time Series Database</a></p></li>
<li><p><a class="reference external" href="https://github.com/timescale/timescaledb">timescaledb: time-series database for high-performance real-time analytics packaged as a Postgres extension</a></p></li>
</ul>
</li>
</ol>
</section>
<section id="work-flow">
<h2><span class="section-number">1.3. </span>Work flow<a class="headerlink" href="#work-flow" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://www.composer.trade/">Composer.trade</a>, Alpaca.markets和QuantConnect.com之类的在线交易平台online-trading platform</p>
<ul class="simple">
<li><p>Composer has 11000只股票和ETF中选择，为其构建策略, 构建、测试和押注量化交易算法,图形和AI界面(英语输入请求转化为代码)，</p></li>
<li><p>可以让用户以简单流程图的形式查看和分享他们的策略 e.g. 如果标准普尔500指数S&amp;P 500 index最近走高，某种算法会选择持有跟踪纳斯达克100指数的三倍杠杆ETF - triple-leveraged exchange-traded fund tracking the Nasdaq-100 index，反之，则持有美国国债Treasury bills</p></li>
<li><p>在Interactive Brokers这类平台上编写交易策略。最近他在Discord上面分享策略后得到了一个想法half-baked idea，用跟踪半导体类股的ETF取代了跟踪纳斯达克100指数的ETF，从而改善了其中一项交易策略的表现</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/QuantConnect">Quantconnect</a>: platform for quant trading</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span> <span class="pre">quantconnect/lean</span></code> or <code class="docutils literal notranslate"><span class="pre">quantconnect/research</span></code></p></li>
<li><p>Quantconnect lean: Lean is the open-source algorithmic trading engine that powers QuantConnect</p></li>
<li><p>Lean CLI:</p>
<ul>
<li><p>is a command interface for running lean engine, and to allow syncing btw local and remote projects</p></li>
<li><p>can be installed and updated by running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">lean</span></code>(Python package)</p></li>
</ul>
</li>
</ul>
</li>
<li><p>A股 online pkg comparison</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/myhhub/stock?tab=readme-ov-file">mayanghua/instock</a> 获取股票数据,计算股票指标,筹码分布,识别股票形态,综合选股,选股策略,股票验证回测,股票自动交易, docker支持PC及移动设备</p></li>
<li><p>勉强进入 <a class="reference external" href="http://localhost:9988/">http://localhost:9988/</a>, add <code class="docutils literal notranslate"><span class="pre">sudo</span></code> in advance</p></li>
<li><p><a class="reference external" href="https://github.com/shidenggui/easyquant">easyquant</a>A股量化框架，支持行情获取以及交易</p></li>
<li><p><a class="reference external" href="https://github.com/shidenggui/easyquotation?tab=readme-ov-file">easyquotation</a>|实时获取免费股票行情，支持新浪 / 腾讯(港股) / 集思录|</p></li>
<li><p><a class="reference external" href="https://github.com/shidenggui/easytrader">easytrader</a>|提供同花顺客户端/miniqmt/雪球的股票量化交易，支持跟踪 joinquant /ricequant 模拟交易 和 实盘雪球组合|</p></li>
<li><p><a class="reference external" href="https://github.com/ricequant/funcat">Funcat</a> –&gt; <a class="reference external" href="https://github.com/mpquant/MyTT">MyTT</a>|同花顺、通达信、文华财经麦语言等公式的表达十分简洁，适合做技术分析,</p>
<ul>
<li><p>MyTT将通达信,同花顺,文华麦语言等指标公式,最简移植到Python中,核心库单个文件，仅百行代码,十几个核心函数，神奇的实现所有常见技术指标算法（不依赖talib库）的纯python实现和转换通达信MACD,RSI,BOLL,ATR,KDJ,CCI,PSY等公式,全部基于pandas函数计算方法封装，简洁且高性能，能非常方便的应用在股票指标公式,股市期货量化框架分析,自动程序化交易,数字货币</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>数据</strong></p></th>
<th class="head"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/akfamily/akshare">AKShare</a></p></td>
<td><p>elegant/simple financial data library, built for human beings开源财经数据接口库</p></td>
</tr>
<tr class="row-odd"><td><p><strong>回测/开发</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/DemonDamon/FinnewsHunter">FinnewsHunter</a></p></td>
<td><p>从新浪财经、每经网、金融界、中国证券网、证券时报网上，爬取上市公司（个股）的历史新闻文本数据进行文本分析、提取特征集，然后利用SVM、随机森林等分类器进行训练，最后对实施抓取的新闻数据进行分类预测</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/wbbhcb/stock_market">stock_market</a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/popbo/alphas">alphas</a></p></td>
<td><p>ipynb, 利用了这个项目<a class="reference external" href="https://github.com/quantopian/alphalens">alphalens</a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/nessessary/autoxd">autoxd</a></p></td>
<td><p>回测框架, 模拟实盘账户交易, 适合编写T+0策略</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/foolcage/fooltrader">fooltrader</a> -&gt; <a class="reference external" href="https://github.com/zvtvz/zvt">zvt</a></p></td>
<td><p>modular quant framework, 项目升级到zvt, 各有详尽解释</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/vnpy/vnpy">vnpy</a></p></td>
<td><p>基于Python, 开源, 量化交易平台开发框架</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://hikyuu.org/">hikyuu</a></p></td>
<td><p>开源量化交易研究框架，策略分析, 回测</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/albert-feng/blade-fury">blade-fury</a></p></td>
<td><p>采集股票数据，利用统计和计算来选股, 要把项目的路径加入PYTHONPATH才能脚本正常运行</p></td>
</tr>
<tr class="row-even"><td><p><strong>模拟/交易</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/ricequant/rqalpha">ricequant/RQAlpha</a></p></td>
<td><p>数据获取、算法交易、回测引擎，实盘模拟，实盘交易到数据分析</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/yutiansut/QUANTAXIS">QUANTAXIS</a></p></td>
<td><p>任务调度/分布式部署, 股票/期货/期权, 数据/回测/模拟/交易/可视化/多账户 纯本地量化]</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/yutiansut/QAStrategy">QAStrategy</a></p></td>
<td><p>QA-sub1</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/QUANTAXIS/QADemoOLD">QADemoOLD</a></p></td>
<td><p>QA-sub2</p></td>
</tr>
<tr class="row-odd"><td><p><strong>策略</strong></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/123quant/QMT-QuantLimit">打板策略</a></p></td>
<td><p>项目实现了一种量化打板策略，用于A股股票交易，涨停板制度只存在于A股</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/fmzquant/strategies?tab=readme-ov-file">quant_strategy_list5800</a></p></td>
<td><p>5800 md files</p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>project</p></th>
<th class="head"><p>自测失败或技术底层comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/sngyai/Sequoia">Sequoia</a></p></td>
<td><p>好学习样本, A股自动选股实现海龟交易法则、缠中说禅牛市买点技术形态,akshare无法下载</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/TA-Lib/ta-lib-python">ta-lib</a></p></td>
<td><p>其他包的底层, talib技术指标库</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kernc/backtesting.py">backtesting</a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/tkfy920/qstock">qstock</a></p></td>
<td><p>付费, depends on pyfolio(too old pkg)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kevin-meng/financial_stock_knowledge_graph">金融证券知识图谱</a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/jm199504/Financial-Knowledge-Graphs">小型金融知识图谱构建流程</a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/stefan-jansen/machine-learning-for-trading">Code for Machine Learning for Algorithmic Trading, 2ed</a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>project</p></th>
<th class="head"><p>non-A股 or windows-based不用</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/wkingnet/stock-analysis">stock-analysis</a></p></td>
<td><p>说明详细值得读，win-based,目前选股条件是阳包阴，而且当天要涨停</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/quantopian/pyfolio">pyfolio</a></p></td>
<td><p>5 years ago</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/gbeced/basana">Basana</a></p></td>
<td><p>Python async and event driven framework for algorithmic trading, focus on crypto currencies</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Reference:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/thuquant/awesome-quant">awesome-quant</a>中国的Quant相关资源索引</p></li>
<li><p><a class="reference external" href="https://github.com/dick318/awesome-stars">awesome-stars</a>按语言分类项目, Github</p></li>
<li></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction</p>
      </div>
    </a>
    <a class="right-next"
       href="nb2024.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Notebook 2023-25</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#steps">1.1. 量化交易Steps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.1.1. 1. 建立系统（自己的）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alpha">1.1.2. 2. 寻找交易策略Alpha</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backtesting">1.1.3. 3. 回测Backtesting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1.1.4. 4. 自动交易系统</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">1.1.4.1. 4.1 资金管理和风险控制</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">1.1.4.2. 4.2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#intro">1.2. Intro</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#work-flow">1.3. Work flow</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tom Tang
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>